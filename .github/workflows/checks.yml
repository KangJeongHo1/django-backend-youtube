# Github Actions CI/CD
---
name: Checks # Workflow 이름

on: [push] # git push 이벤트 활성화 -> 레포지토리에 push를 했을 때 활성화

jobs:
  test-lint:
    name: Test and Lint
    runs-on: ubuntu-20.04 # 작업 환경
    steps: # 작업 단계
      # 도커 연결 작업
      - name: Login in to Docker Hub
        uses: docker/login-actions@v1
        with:
          username: ${{ secrets.DOCKERHUB_USER }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}
      - name: Checkout # 깃헙 레포에 있는 코드를 직접 환경을 가져오는 역할
        uses: actions/checkout@v2
      - name: Test # 테스트 코드 실행
        run: docker-compose run --rm app sh -c "python manage.py test"
      - name: Lint # pep8 파이썬 코드 스타일 가이드 준수 여부 검사
        run: docker-compose run --rm app sh -c "flake8"


# Github Action?
# Github에 일이 발생해서 Github가 행동하는것
#   - Push: 코드를 Github를 올리는 행위
#     * Test코드 돌리기
#       - Push된 코드가 Test코드를 통과 했는지
#     * Flake8 실행
#       - Flake8 실행 후 코드 맞추기

#   - PR: 어떤 사람이 다른 Branch에서 코드 작업을
#     * Test코드 실행
#     * Flake8 실행

#   - Merge: 특정 브랜치(기능 개발)를 다른 브렌치(메인 브렌치) 코드에 합치는 일
#   
